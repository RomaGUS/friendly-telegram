<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.6.5/alt/video-js-cdn.min.css">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.6.5/video.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
		
		<title>Document</title>
	</head>
	<body>
		<button onClick="info()">Info</button>

		<form method="post" enctype="multipart/form-data" id="fileUploadForm">
			<input name="upload" type="file">
			<button type="submit" id="btnSubmit">Upload</button></a>
		</form>

		<img id="upload-preview" src="" alt="">

		<!-- <img src="https://cdn.hikka.io/volbil/hikka_da92080672e8a49917e3aa0bb237ead8.jpg" alt=""> -->

		<!-- <video id=example-video width=960 height=540 class="video-js vjs-default-skin" controls>
			<source src="https://cdn.hikka.io/konosuba/hls/watch.m3u8" type="application/x-mpegURL">
		</video> -->

		<script>
			$(document).ready(function () {

				$("#btnSubmit").click(function(e) {
					e.preventDefault();
					var form = $('#fileUploadForm')[0];
					var data = new FormData(form)

					data.append("auth", "3nT8FnbSgJ2jyd4n97uiAp8J4m5o6GHuYpbsSVbHxJnUepd.ZMKC1hNPqdfkmnGBbzBZRyFxaagjRewcWqBUd2dc72GrWwjwm6nZnjuHTWGpUaqZmYJe7gpHiQGNQVvjhFRTpR.Bg2wiT4yniUPTEMqWLqi5NUaHSAUqHy479qhcb81zBgqwgGEzgaV2zpZGmddruAphxt7C3Q13eStctY3HTvfAjU5zdu3V")
					data.append("type", "avatar")

					$.ajax({
						type: "POST",
						enctype: 'multipart/form-data',
						url: "/upload",
						data: data,
						processData: false,
						contentType: false,
						cache: false,
						timeout: 600000,
						success: function (data) {
							console.log("SUCCESS : ", data);
							$("#upload-preview").attr("src", data.data.path)
						},
						error: function (e) {
							console.log("ERROR : ", e.responseJSON);
						}
					});
				});

				// var player = videojs('example-video');
				// player.play();

			});

		</script>
	</body>
</html>